<html>

<head>
<title>CLF Artemis WebDAV File Server</title>

<style>
td {
	padding: 10px;
}
.lightgrey {
	background-color: #EEEEEE;
}
td.spacer {
	width: 25px;
}
</style>

</head>

<body>

<h1>CLF Artemis WebDAV File Server</h1>

<h2>Purpose</h2>

<table>
<tr>
<td class="spacer">&nbsp;</td>
<td class="lightgrey">

<p>This file server is run on behalf of the team operating the Artemis laser at STFC's Rutherford Appleton Laboratory.</p>
<p>The Artemis team upload the data for each experiment onto the server, allowing the Facility Users to
browse and download the data collected during their experiment.</p>
<p>Because WebDAV is an extension to the HTTP protocol, the file server is available from any device connected to
the internet, including inside RAL, from other academic institutions, from home etc.</p>
<p>File and folder permissions are all handled by the server such that users only have access to the data from
experiments which they are associated with. </p>
<p>Users also only have read access to this data - they cannot upload additional files.</p>

</td>
</tr>
</table>


<h2>Increasing the file size limit in Windows 7 and 8.1</h2>
<p>Note: this should be done before connecting to the WebDAV server using the instructions in the <b>'How to connect'</b> section below.</p>

<table>
<tr>
<td class="spacer">&nbsp;</td>
<td class="lightgrey">

<h3>Technical details - skip this paragraph if you are not interested in the details!</h3>
<p>By default the maximum size of file that can be transfered from a WebDAV file server is 50 MB. </p>
<p>This is typically enough for office documents but is not enough for some scientific data files.</p>
<p>The limit is controlled by a setting in the Windows registry.</p>
<p>The settings are found under the registry key:</p>
<p>HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\WebClient\Parameters</p>
<p>The parameter 'FileSizeLimitInBytes' needs changing from 50000000 (Decimal - ~50 MB) to ffffffff (Hex - 4 GB).</p>
<p>After this the service 'WebClient' needs restarting to pick up the new value.</p>
</td>
</tr>
</table>

<p></p>

<table>
<tr>
<td class="spacer">&nbsp;</td>
<td class="lightgrey">

<h3>How to increase the limit</h3>
<p>The batch script <a href="webdav_files/registry_update.bat">downloadable here</a> will do this for you but needs to
be run with administrator privileges. </p>
<p>If you are unsure as to whether you have administrator privileges
then you can still download and run the script and you will be able to tell from the error messages.</p>

<p>Click on the link to the batch file above and save it (DON'T RUN IT YET).</p>
<p>Go to the folder containing the the downloaded file 'registry_update.bat', right click on the file and select 'Run as administrator'.</p>
<p>If you get 'Access is denied' errors in the Command Window then you do not have administrator privileges.<p> 
<p>Contact your system administrator to have these privileges added. If this is not possible, then the connection
to the file server will still work but you will get an error whenever you try to access files larger than 50 MB.<p> 
<p>If you get messages in the Command Window reporting that the commands ran successfully, then the registry update has been done successfully.</p>
</td>
</tr>
</table>

<p></p>

<table>
<tr height="50px">
<th>&nbsp;</th>
<th class="lightgrey">
A successful batch script run
</th>
<th width="10px">&nbsp;</th>
<th class="lightgrey">
Batch script failed - administrator privileges required
</th>
</tr>
<tr>
<td class="spacer">&nbsp;</td>
<td class="lightgrey">
<img src="webdav_files/batch_success.png"></img>
</td>
<td>&nbsp;</td>
<td class="lightgrey">
<img src="webdav_files/batch_failure.png"></img>
</td>
</tr>
</table> 

<h2>How to connect</h2>

<table>
<tr>
<td class="spacer">&nbsp;</td>
<td class="lightgrey">

<h3>Windows 7 and 8.1</h3>
<p>With a 'Windows Explorer' file browser open right-click on 'Computer' (Windows 7) or 'This PC' (Windows 8.1) or 'Network' in the left hand navigation pane then select <b>'Map network drive...'</b> </p>

<img src="webdav_files/map_network_drive_w7_1.png"></img>

<p>Insert <b>https://artemis-test.esc.rl.ac.uk/webdav/</b> into the 'Folder' </p>
<p>Click 'Connect using different credentials' </p>
<p>Click 'Finish' </p>

<img src="webdav_files/map_network_drive_w7_2.png"></img>

<p>Enter your login details into the login box</p>

<ul>
 <li>For Facility Users this is the email address and password which you used to register with the STFC Facilities User Office.</li>
 <li>For Artemis admin users this is your STFC Federal ID (no prefix required) and password.</li>
</ul>   

<p>
Click 'Remember my credentials' if you are logged into Windows using a personal account and want to connect to this file server again in the future.<br>
<b>DO NOT</b> select it if you are using a shared computer or logged into Windows using some kind of shared "guest" account.
</p>

<img src="webdav_files/map_network_drive_w7_3.png"></img>

<p>If the login is successful then you will see the top level 'Artemis' folder as shown below.</p>
<p>Navigate into the Artemis folder and you will see a folder for each experiment which you are associated with.</p>

<img src="webdav_files/map_network_drive_w7_4.png"></img>

</td>
</tr>
</table> 

<h2>Browsing</h2>

<table>
<tr>
<td class="spacer">&nbsp;</td>
<td class="lightgrey">

<p>You can browse the directory structure and open files as you normally would in Windows Explorer.</p>
<p>You may be re-prompted to enter your login details when opening certain file types.</p>
<p>Facility Users are not able to create, modify or delete any files or folders.</p>

</td>
</tr>
</table>

<h2>Downloading</h2>

<table>
<tr>
<td class="spacer">&nbsp;</td>
<td class="lightgrey">

<p>If you would like to download files to your local machine, this is done in the usual way.</p>
<p>You can either drag and drop files or folders into a local directory, or copy and paste in the
usual way using either the keyboard or mouse.</p>
<p>When downloading folders containing large amounts of data (particularly lots of small files)
this can be a slow process.</p>
<p>A whole experiment can contain up to 100 GB of data and with a possible download speed of
around 1 MB/sec, this would take around 24 hours to download.</p>
<p>You can get an idea of how long a download might take by right clicking on the file or folder
and selecting 'Properties'.</p>
<p>Be aware that whilst the progress bar in the copy dialog box is often quite accurate,
the estimate of remaining time is often very wrong!</p>

</td>
</tr>
</table>

<h2>Uploading (only admin users)</h2>

<table>
<tr>
<td class="spacer">&nbsp;</td>
<td class="lightgrey">

<p>In order to upload data for an experiment, open the top level 'Artemis' folder and you will
then see a list of all the experiments.</p>
<p>If you cannot find a folder for the experiment you are looking for, please contact
Kevin Phipps in Scientific Computing to find out why this is.</p>
<p>If you create a new experiment folder, any data saved to it will be safe but no Facility Users
will have access to it - only other Facility Admin users.</p>
<p>Open the folder corresponding to the experiment you want to upload data for.</p>
<p>Drag and drop or copy and paste folders of data into the experiment folder in the usual way.</p>
<p>Note that it is not possible to put files directly into the experiment folder. Only folders can be added at this level.</p>
<p>Facility Admins have full access to read, create, modify and delete files and folders at any level, 
so a certain level of care needs to be taken to ensure that files are not accidentally deleted.</p>
<p>As mentioned in the Downloading section, if you are uploading a lot of data (particularly lots of
small files) then this is likely to take a while - allow up to 15 minutes per gigabyte of data.</p>
<p>To find out the size of the data to be uploaded, right click on the files or folders and select 'Properties'.</p> 

</td>
</tr>
</table>

</body>

</html>